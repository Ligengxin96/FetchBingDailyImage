name: Automated Update README

on:
  schedule:
    - cron: "*/5 * * * *"

jobs:
  markscribe:
    runs-on: ubuntu-latest

    steps:
      - name: Get current date
        id: date
        run: echo "::set-output name=date::$(date +'%Y-%m-%d %H:%M:%S')"
      - name: github-update-readme-v2
        uses: Ligengxin96/github-update-readme@v1.5.0
        env:
          GITHUB_TOKEN: ${{ secrets.PAT }}
        with:
          header: Abount FetchBingDailyImage
          subhead: |
                  The main branch project can fetch bing daily image and store in mongoose.

                  The apis branch project can export the apis so that we can get bing historical daily images.

                  ## How it work

                  Use schedule Github Action to automatically update readme.md file to trigger the Github Action to deploy main branch project to heroku.

                  After deploying in heroku, heroku will automatically execute `npm start` command to run this project, so we can fetch the image everyday.

                  This is like we deploy a azure function in heroku, we can get a free azure function by this way.

                  ## Latest Fetch Time

                  Latest Fetch Time: `${{ steps.date.outputs.date }}`
